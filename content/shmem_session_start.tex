\apisummary{
    Start a communication session.
}

\begin{apidefinition}

\begin{Csynopsis}
void @\FuncDecl{shmem\_session\_start}@(shmem_ctx_t ctx, long options);
\end{Csynopsis}

\begin{apiarguments}
    \apiargument{IN}{ctx}{A context handle specifying the context associated
    with this session.}
    \apiargument{IN}{options}{The set of requested options from
    Table~\ref{session_opts} for this session.  Multiple options may be
    requested by combining them with a bitwise OR operation; otherwise,
    \CONST{0} can be given if no options are requested.}
\end{apiarguments}

\apidescription{
    \FUNC{shmem\_session\_start} is a non-collective routine that begins a
    session on communication context \VAR{ctx} with hints requested via
    \VAR{options}.
    Sessions on a communication context must be stopped with a call to
    \FUNC{shmem\_session\_stop} on the same context.
    If a session is already started on a given context, another call to
    \FUNC{shmem\_session\_start} on that same context combines new options via a
    bitwise OR operation.

    No combination of \VAR{options} passed to \FUNC{shmem\_session\_start}
    results in undefined behavior, but some combinations may be detrimental for
    performance; for example, when selecting an option that is not applicable
    to the session. It is the user's responsibility to determine which
    combination of \VAR{options} benefits the performance of the session.
}

\apireturnvalues{
    None.
}

\begin{longtable}{|p{0.40\textwidth}|p{0.55\textwidth}|}
    \hline
    \hline
    \textbf{Option} & \textbf{Usage hint}
    \tabularnewline \hline
    \endhead
    %%
    \LibConstDecl{SHMEM\_SESSION\_CHAIN} &
    \newline
    The performance of \openshmem programs that issue many consecutive and
    small-sized communication routines might be improved by combining these
    routines into fewer operations.

    The \VAR{SHMEM\_SESSION\_CHAIN} hint indicates that a communication context
    will be used to issue a series of operations that are suitable for the
    \openshmem library to chain together.  An example of a
    chain is an iterative loop of non-blocking RMA and/or AMO routines. A chain
    must not include a memory ordering or collective operation.

    Because sessions do not affect the completion or ordering semantics of any
    \openshmem routines in the program, routines such as non-blocking RMAs,
    non-blocking AMOs, non-blocking \OPR{put-with-signal}, blocking scalar
    \OPR{puts}, and blocking non-fetching AMOs are viable candidates for
    chaining optimizations.  Other routines, such as blocking non-scalar
    \OPR{puts} and \OPR{gets}, blocking fetching AMOs, blocking scalar
    \OPR{gets}, and the memory ordering routines might require the library to
    enforce remote completion, reducing the potential benefit of chaining
    optimizations.

    \tabularnewline \hline 

    \LibConstDecl{SHMEM\_SESSION\_UNIFORM\_AMO} &
    \newline
    The session will contain a chain (as defined by the
    \VAR{SHMEM\_SESSION\_CHAIN} option) of only AMOs that will not occur
    concurrently across any different signal operators
    (i.e.~\ref{subsec:signal_operator}), operations (\ref{sec:amo}), or types
    (Tables \ref{stdamotypes} and \ref{extamotypes}).

    \tabularnewline \hline
    \TableCaptionRef{Session options}
    \label{session_opts}
\end{longtable}

\apinotes{
    The \FUNC{shmem\_session\_start} routine provides hints for improving
    performance, and \openshmem implementations are not required to apply any
    optimization.
    \FUNC{shmem\_session\_start} is non-collective, so there is no implied
    synchronization.
}

\end{apidefinition}
