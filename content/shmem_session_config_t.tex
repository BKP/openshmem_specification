\apisummary{
  A structure type representing communication session configuration arguments
}

\begin{apidefinition}

\begin{Csynopsis}
typedef struct {
  size_t total_ops;
  size_t delivery_rate;
} shmem_session_config_t;
\end{Csynopsis}

\begin{apiarguments}
  None.
\end{apiarguments}


\apidescription{
  A communication session configuration object is provided as an argument to
  the \FUNC{shmem\_session\_start} routine.
  The \VAR{shmem\_session\_config\_t} object contains optional parameters
  that are associated with the options of a communication session.
  These parameters serve only as \textit{hints} to the library; it is up to
  the implementation whether or not to use the parameter values within
  a session.

  The \VAR{total\_ops} member indicates the expected maximum number of all
  calls to \openshmem RMA routines within the session (i.e., after a call to
  \FUNC{shmem\_session\_start} and before a corresponding call to
  \FUNC{shmem\_session\_stop}).
  If \VAR{total\_ops} is lower than the actual number of calls to \openshmem
  RMA routines within the session, then application performance might be
  suboptimal; however, the result of any data transfers, completions, or
  memory ordering operations are unaffected by the value of
  \FUNC{total\_ops}.

  The \VAR{delivery\_rate} member indicates the expected number of
  \openshmem RMA operations to buffer, combine, and/or coalesce (see
  \LibConstRef{SHMEM\_SESSION\_BATCH} option to
  \FUNC{shmem\_session\_start} within \ref{subsec:shmem_session_start}) before
  the library delivers all pending RMA routines in the
  session to the network.
  The value of \VAR{delivery\_rate} is expected to be less than the value
  of \VAR{total\_ops}; however, the result of any data transfers,
  completions, or memory ordering operations are unaffected by the value of
  \FUNC{delivery\_rate}.

  When using the configuration structure to start a communication session, a
  mask parameter controls which fields are accessed by the \openshmem
  library.
  Any configuration parameter value that is not indicated in the mask will be
  ignored, and the default value will be used instead.
  Therefore, a program must set only the fields for which it does not want
  the default value.

  A configuration mask is created through a bitwise OR operation of the
  following library constants.
  A configuration mask value of \CONST{0} indicates that the team
  should be created with the default values for all configuration
  parameters.

  \apitablerow{\LibConstRef{SHMEM\_SESSION\_TOTAL\_OPS}}{
    The value of the \VAR{total\_ops} member of the \VAR{config} structure is
    unmasked within the session and applied as a hint.
  }

  \apitablerow{\LibConstRef{SHMEM\_SESSION\_DELIVERY\_RATE}}{
    \vspace{2mm}
    The value of the \VAR{delivery\_rate} member of the \VAR{config}
    structure is unmasked within the session and applied as a hint.
  }

  The default values for configuration parameters are:

  \apitablerow{\VAR{total\_ops} = \CONST{SIZE\_MAX}}{
    By default, the number of expected maximum number of calls to \openshmem
    RMA routines is set to the upper bound of a \VAR{size\_t} variable,
    \VAR{SIZE\_MAX}. This is a representative constant that indicates the
    \openshmem library is free to select any value appropriate for the
    implementation.
  }

  \apitablerow{\VAR{delivery\_rate} = \CONST{SIZE\_MAX}}{
    By default, the number of expected number of \openshmem RMA calls to
    buffer, combine, and/or coalesce is set to the upper bound of a
    \VAR{size\_t} variable, \VAR{SIZE\_MAX}.  This is a representative
    constant that indicates the \openshmem library is free to select any
    value appropriate for the implementation.
  }
}

\apinotes{
    Users are discouraged from calling \FUNC{shmem\_fence},
    \FUNC{shmem\_cxt\_fence}, \FUNC{shmem\_quiet}, or
    \FUNC{shmem\_ctx\_quiet} routines within a session when tolerant, because
    the library must impose strict completions to comply with ordering
    semantics.  Users are instead encouraged to provide the \FUNC{total\_ops}
    and \FUNC{delivery\_rate} hints to influence how the library pipelines
    batched operations (see \LibConstRef{SHMEM\_SESSION\_BATCH} option to
    \FUNC{shmem\_session\_start} in \ref{subsec:shmem_session_start}).
    However, only quiet and fence operations guarantee that in-use data
    buffers can be updated after previously invoked RMA routines.
}

\end{apidefinition}
